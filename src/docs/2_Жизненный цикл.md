# Жизненный цикл данных в Raph

## Данные и пути (DataPath)

В **Raph** все изменения выражаются через пути (DataPath), которые:

- могут быть простыми: user.name
- содержать индексы: users[1].email
- содержать параметры: orders[id=$id].total
- содержать маски: *.items[*].price

Когда вызывается app.set(path, value):

1. Формируется DataPath.
2. Срабатывает RaphRouter, который ищет все подписки, чьи маски соответствуют этому пути.
3. Для каждого совпадения находятся ноды (RaphNode), которые должны быть dirty.
4. Для каждого совпадения находятся все фазы (Phase), которые слушают этот путь.
5. Каждая нода помечается как dirty в контексте этих фаз.
6. Планировщик (Scheduler) решает, когда эти фазы будут исполнены (сразу или в батче).
7. Когда приходит время, фаза обходит все свои dirty-ноды и вызывает для каждой executor с контекстом (PhaseExecutorContext), содержащим ноду и событие (PhaseEvent) с путём и параметрами.
